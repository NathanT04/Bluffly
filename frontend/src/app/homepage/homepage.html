<div class="homepage">
  <div class="glow"></div>

  <app-nav-bar
    [active]="active"
    [isAuthenticated]="isAuthenticated"
    (changeTab)="setActive($event)"
  ></app-nav-bar>

  <!-- User Profile Section (Top Right) - only show when authenticated -->
  <div class="user-section" *ngIf="isAuthenticated">
    <div class="user-info">
      <img [src]="user?.picture" [alt]="user?.name" class="user-avatar">
      <span class="user-name">Welcome, {{ user?.name }}!</span>
      <button class="logout-btn" (click)="logout()">Logout</button>
    </div>
  </div>

  <main>
    <ng-container [ngSwitch]="active">
      <section *ngSwitchCase="'Home'" class="hero">
        <div class="hero-content">
          <h1>Bluffly</h1>
          <p>
            Practice your poker skills, learn optimal strategies, <br />
            and build your confidence at the table.
          </p>

          <!-- Connect your existing Register button to Google Sign-In -->
          <button *ngIf="!isAuthenticated" (click)="signInWithGoogle()">
            Sign in with Google
          </button>

          <!-- Show Continue Playing when authenticated -->
          <button *ngIf="isAuthenticated">
            Continue Playing
          </button>

          <!-- Error message if login failed -->
          <div class="error-message" *ngIf="loginError">
            {{ loginError }}
          </div>
        </div>

        <div class="hero-side">
          <app-home-tab></app-home-tab>
        </div>
      </section>

      <section *ngSwitchCase="'Simulation'" class="tab-section">
        <app-simulation-tab></app-simulation-tab>
      </section>

      <section *ngSwitchCase="'Analyzer'" class="tab-section">
        <app-analyzer-tab></app-analyzer-tab>
      </section>

      <section *ngSwitchCase="'Lessons'" class="tab-section">
        <app-lessons-tab></app-lessons-tab>
      </section>
    </ng-container>
  </main>

  <footer>
    Â© {{ currentYear }} Bluffly
  </footer>
</div>
