<div class="tab">
  <h2>Poker Simulation</h2>

  <div class="controls">
    <button (click)="newGame()" [disabled]="busy">New Game</button>
    <button (click)="nextStreet()" [disabled]="busy || !snapshot || snapshot.phase === 'showdown'">
      Next Street
    </button>
  </div>

  <div class="table">
    <div class="felt">
      <ng-container *ngIf="snapshot as s; else empty">
        <div class="board-area">
          <div class="board-cards">
            <app-playing-card *ngFor="let c of s.board" [card]="c"></app-playing-card>
            <app-playing-card *ngFor="let _ of [].constructor(5 - s.board.length)" [card]="null"></app-playing-card>
          </div>
          <div class="pot">Pot: {{ s.pot }}</div>
        </div>

        <div class="seats">
          <div class="seat top" *ngIf="s.players[1] as villain">
            <div class="name">{{ villain.name }} • {{ villain.stack }}</div>
            <div class="hand">
              <app-playing-card *ngFor="let c of villain.hand" [card]="c"></app-playing-card>
            </div>
          </div>

          <div class="seat bottom" *ngIf="s.players[0] as hero">
            <div class="name">{{ hero.name }} • {{ hero.stack }}</div>
            <div class="hand">
              <app-playing-card *ngFor="let c of hero.hand" [card]="c"></app-playing-card>
            </div>
          </div>
        </div>

        <div class="phase-label">{{ s.phase | titlecase }}</div>
      </ng-container>
      <ng-template #empty>
        <div class="empty">Click "New Game" to deal hole cards.</div>
      </ng-template>
    </div>
  </div>
</div>
